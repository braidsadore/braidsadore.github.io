<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Appointment Booking</title>
    <style>
        
   /* General body and HTML styling */
body, html {
    margin: 0;
    padding: 0;
    font-family: 'Arial', sans-serif;
    background-color: #f4f4f9;
}

/* Header styling, including the logo */
header {
    background: saddlebrown;
    color: #fff;
    padding: 20px 0;
    text-align: left;
    position: relative;
}

#logo {
    max-width: 400px;
    display: block;
    margin-top: 0;
    margin-right: 30px;
    float: left;
}

/* Container styling */
.container {
    width: 90%;
    margin: 0 auto;
    overflow: hidden;
}

/* Grid of styles */
.styles-grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 20px;
    padding: 20px;
}

.style-card {
    background: #fff;
    border: 1px solid #ddd;
    text-align: center;
    padding: 20px;
    box-shadow: 0 2px 5px rgba(0,0,0,0.1);
}

.style-card img {
    width: 100%;
    height: auto;
    margin-bottom: 15px;
}

/* Button styling */
button {
    color: white;
    background-color: darkred;
    border: 1px solid darkred;
    border-radius: 15px;
    padding: 10px 20px;
    cursor: pointer;
    display: inline-block;
    margin-top: 10px;
}

button:hover {
    background-color: #a30000;
}

/* Input field styling */
input[type="text"], input[type="email"], input[type="tel"] {
    width: 100%;
    padding: 10px;
    margin: 10px 0;
    border: 1px solid #ccc;
    border-radius: 4px;
}

/* Booking section styling */
#bookingSection {
    display: none;
    align-content: center;
  }

#booking {
    display: block;
    align-content: center;
}

/* Calendar and time container styling */
#calendar-container, #time-container {
    display: flex;
    flex-direction: column;
    align-items: center;
    width: 60%;
    margin-bottom: 20px;
    padding: 4%;
}

/* Calendar and time grid styling */
#calendar, .time-grid {
    display: grid;
    grid-template-columns: repeat(7, 1fr);
    gap: 5px;
    width: 50%;
}

/* Calendar days and time slots styling */
#calendar > div, .time-slot {
    padding: 10px;
    text-align: center;
    border: 1px solid #ccc;
}

/* Interactive elements styling */
.day, .time-slot {
    cursor: pointer;
}

.day:hover, .time-slot:hover {
    background-color: #f0f0f0;
}

.day.selected, .time-slot.selected {
    background-color: #add8e6;
}

.time-slot.unavailable {
    filter: blur(2px);
    pointer-events: none;
}



/* Form styling */
form {
    display: none;
    grid-template-columns: 1fr;
    gap: 10px;
    width: 50%;
    margin-left: 25%;
}

form > div {
    grid-column: span 1;
}


/* Confirmation container styling */
#confirmation-container {
    display: none;
    flex-direction: column;
    align-items: center;
}

#confirmationDetails {
    margin-left: 25%;
    border: 1 solid;
}

#confirmationForm {
    display: flex;
    flex-direction: column;
    align-items: center;
    border: 1px solid;
    width: 50%;
}
    </style>
</head>
<body>
    <header>
        <img id="logo" src="./images/logo1.png" alt="Logo">
        <p>Welcome To Our Appointment Booking Site</p>
        <button type="button" onclick="goBackToBookingForm()">Edit Your Inputs</button>
        <button type="button" onclick="openLoginSignupModal()" style="float: right;">Sign Up / Log In</button>
        <button type="button" onclick="home()" style="float: left;">Home</button>
    </header>
    <div class="container">
        <section id="appointmentSection">
            <h2>Choose Your Style</h2>
            <div class="styles-grid">
                <div class="style-card">
                    <img id="log" src="./images/1.png" alt="Logo">
                    <h3>Medium Knotless Braids - $240</h3>
                    <button onclick="openBookingForm('Medium Knotless Braids', 240, ['Waist $40', 'Butt $80', 'Ombré $50', 'Boho $80', 'Boho blend $50'])">Book</button>
                </div>
                <!-- More styles as described -->
                <!-- Add more style cards here -->
            <div class="style-card">
                <img id="log" src="./images/2 smkb.png" alt="Logo">
                <h3>Small Medium - $260</h3>
                <button onclick="openBookingForm('Small Medium', 260, ['Waist $40', 'Butt $80', 'Ombré $50', 'Boho $80', 'Boho blend $50'])">Book</button>
            </div>
            <div class="style-card">
                <img id="log" src="./images/3 eskb.png" alt="Logo">
                <h3>Small Knotless Braids - $280</h3>
                <button onclick="openBookingForm('Small Knotless Braids', 280, ['Waist $40', 'Butt $80'])">Book</button>
            </div>
            <div class="style-card">
                <h3>Xtra Small Knotless Braids - $400</h3>
                <button onclick="openBookingForm('Xtra Small Knotless Braids', 400, ['Waist $80', 'Butt $150'])">Book</button>
            </div>
            <div class="style-card">
                <h3>Large Knotless Braids - $200</h3>
                <button onclick="openBookingForm('Large Knotless Braids', 200, ['Waist $30', 'Butt $60', 'Boho human $80'])">Book</button>
            </div>
            <div class="style-card">
                <h3>Tribal Braids - $230</h3>
                <button onclick="openBookingForm('Tribal Braids', 230, ['Waist $50', 'Butt $80', 'Boho human $80', 'Boho blend $50'])">Book</button>
            </div>
            <div class="style-card">
                <h3>Side Braids - $200</h3>
                <button onclick="openBookingForm('Side Braids', 200, ['Waist $30', 'Butt $60'])">Book</button>
            </div>
            <div class="style-card">
                <h3>Soft Lock - $250</h3>
                <button onclick="openBookingForm('Soft Lock', 250, [])">Book</button>
            </div>
            <div class="style-card">
                <h3>Kinky Twist - $200</h3>
                <button onclick="openBookingForm('Kinky Twist', 200, [])">Book</button>
            </div>
            <div class="style-card">
                <h3>Jumbo Knotless - $180</h3>
                <button onclick="openBookingForm('Jumbo Knotless', 180, ['Butt $200'])">Book</button>
            </div>
            <div class="style-card">
                <h3>Small Straight Back - $180</h3>
                <button onclick="openBookingForm('Small Straight Back', 180, ['Waist $50', 'Butt $70'])">Book</button>
            </div>
            <div class="style-card">
                <h3>Senegalese Twist Medium Mid Back - $230</h3>
                <button onclick="openBookingForm('Senegalese Twist Medium Mid Back', 230, ['Waist $40', 'Butt $40'])">Book</button>
            </div>
            <div class="style-card">
                <h3>Bohemian Bob - $290</h3>
                <button onclick="openBookingForm('Bohemian Bob', 290, ['Human curls, 1 bundles of 100grm $80'])">Book</button>
            </div>
            <div class="style-card">
                <h3>3layers Tribal - $270</h3>
                <button onclick="openBookingForm('3layers Tribal', 270, ['Waist $50', 'Butt $80'])">Book</button>
            </div>
            <div class="style-card">
                <h3>Small Box Braids - $270</h3>
                <button onclick="openBookingForm('Small Box Braids', 270, ['Waist $40', 'Butt $80'])">Book</button>
            </div>
            <div class="style-card">
                <h3>Medium Box Braids - $220</h3>
                <button onclick="openBookingForm('Medium Box Braids', 220, ['Waist $40', 'Butt $80'])">Book</button>
            </div>
            <div class="style-card">
                <h3>Stich - 1 Stitch $20</h3>
                <button onclick="openBookingForm('Stich', 20, ['6 Stitch $120', '10 Stitch $180'])">Book</button>
            </div>
            <div class="style-card">
                <h3>Small Ponytail - $220</h3>
                <button onclick="openBookingForm('Small Ponytail', 220, [])">Book</button>
            </div>
            <div class="style-card">
                <h3>Medium Ponytail - $180</h3>
                <button onclick="openBookingForm('Medium Ponytail', 180, [])">Book</button>
            </div>
            <div class="style-card">
                <h3>Braids Take Out - From $70</h3>
                <button onclick="openBookingForm('Braids Take Out', 70, [])">Book</button>
            </div>
        </div>
    </section>
   
<div id="timeDropdown" style="display:none;">
    <ul>
        <li onclick="handleDropdownSelection('confirm')">Confirm Time and Continue</li>
        <li onclick="handleDropdownSelection('add')">Change The Time</li>
    </ul>
</div>
  </div>
</section>

        <section id="bookingSection">
           <form id="booking">
            <h2>Booking Details</h2>
            <div id="selectedStyle"></div>
            <div id="addOns"></div>
            <label for="quantity">Quantity:</label>
            <input type="number" id="quantity" value="1" min="1" onchange="updateQuantity()">
            <p>Total Price: $<span id="totalPrice"></span></p>
            <div id="calendar-container">
                <h3>Select The Date And The Time</h3>
                <div class="header">
                    <button onclick="navigateCalendar(-1)">&#8592;</button>
                    <span id="month-year"></span>
                    <button onclick="navigateCalendar(1)">&#8594;</button>
                </div>
                <div id="calendar"></div>
            </div>
            <div id="time-container" class="time-container">
            <div id="time-grid" class="time-grid"></div>
            </div>
        </form>
        </section>
        
        <section id="info-container">
               <form id="infoForm">
                <h3>Your Information</h3>
                <input type="text" id="firstName" placeholder="First Name" required>
                <input type="text" id="lastName" placeholder="Last Name" required>
                <input type="tel" id="phone" placeholder="Phone Number" required pattern="[0-9]{10}">
                <input type="email" id="email" placeholder="Email Address" required>
                <div>
                    <button type="button" onclick="confirmInformation()">Confirm</button>
                </div>
            </form>
        </section>
       
       <section id="confirmation-container">
    <h3>Confirmation</h3>
    <form id="confirmationForm" action="https://formspree.io/f/xbjnwlrp" method="POST">
        <div id="confirmationDetails">
            <p id="selectedStyle"></p>
            <p id="quantity"></p>
            <p id="price"></p>
            <p id="selectedAddOns"></p>
            <p id="totalPrice"></p>
            <p id="firstName"></p>
            <p id="lastName"></p>
            <p id="phoneNumber"></p>
            <p id="email"></p>
        </div>
        <button type="button" onclick="submitConfirmationForm()">Submit</button>
    </form>
</section>
</div>

    <script>
        let currentMonth = new Date().getMonth();
        let currentYear = new Date().getFullYear();
        let selectedDate = null;

        const timeSlots = [
            "6:00 AM", "7:00 AM", "8:00 AM", "9:00 AM", "10:00 AM", "11:00 AM",
            "12:00 PM", "1:00 PM", "2:00 PM", "3:00 PM", "4:00 PM", "5:00 PM", "6:00 PM"
        ];

        function openBookingForm(style, price, addOns) {
            sessionStorage.setItem('selectedStyle', style);
            sessionStorage.setItem('stylePrice', price);
            sessionStorage.setItem('quantity', 1);
            sessionStorage.setItem('addOns', JSON.stringify(addOns));

            document.getElementById('appointmentSection').style.display = 'none';
            document.getElementById('bookingSection').style.display = 'block';

            document.getElementById('selectedStyle').innerText = `Style: ${style} - $${price}`;
            document.getElementById('totalPrice').innerText = price;
            populateAddOns(addOns);
        }

        function populateAddOns(addOns) {
            const addOnsContainer = document.getElementById('addOns');
            addOnsContainer.innerHTML = '<h3>Add-Ons</h3>';
            addOns.forEach(addOn => {
                const addOnPrice = addOn.split(' $')[1];
                addOnsContainer.innerHTML += `<label><input type="checkbox" value="${addOnPrice}" onchange="updateAddOns()"> ${addOn}</label><br>`;
            });
        }

        function updateAddOns() {
            const checkboxes = document.querySelectorAll('#addOns input[type="checkbox"]');
            let totalPrice = parseFloat(sessionStorage.getItem('stylePrice'));
            checkboxes.forEach(checkbox => {
                if (checkbox.checked) {
                    totalPrice += parseFloat(checkbox.value);
                }
            });
            const quantity = parseInt(sessionStorage.getItem('quantity'));
            totalPrice *= quantity;
            sessionStorage.setItem('totalPrice', totalPrice);
            document.getElementById('totalPrice').innerText = totalPrice;
        }

        function updateQuantity() {
            const quantity = document.getElementById('quantity').value;
            sessionStorage.setItem('quantity', quantity);
            updateAddOns();
        }

        function navigateCalendar(direction) {
            currentMonth += direction;
            if (currentMonth < 0) {
                currentMonth = 11;
                currentYear--;
            } else if (currentMonth > 11) {
                currentMonth = 0;
                currentYear++;
            }
            generateCalendar(currentMonth, currentYear);
        }
   

        function generateCalendar(month, year) {
    const calendarDiv = document.getElementById('calendar');
    const monthYearSpan = document.getElementById('month-year');
    const daysOfWeek = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];
    const daysInMonth = new Date(year, month + 1, 0).getDate();
    const firstDayOfMonth = new Date(year, month, 1).getDay();
    const monthNames = ["January", "February", "March", "April", "May", "June",
                        "July", "August", "September", "October", "November", "December"];

    let htmlContent = daysOfWeek.map(day => `<div>${day}</div>`).join('');
    htmlContent += `<div style="grid-column-start: ${firstDayOfMonth + 1};"></div>`; // Offset start

    for (let day = 1; day <= daysInMonth; day++) {
        htmlContent += `<div class="day" onclick="selectDay(this, ${day}, ${month + 1}, ${year})">${day}</div>`;
    }

    monthYearSpan.textContent = `${monthNames[month]} ${year}`;
    calendarDiv.innerHTML = htmlContent;
}

function selectDay(element, day, month, year) {
    selectedDate = `${month}/${day}/${year}`;
    sessionStorage.setItem('selectedDate', selectedDate);
    //alert(`Selected date: ${selectedDate}`);
    generateTimeGrid(selectedDate);

    const days = document.querySelectorAll('.day');
    days.forEach(dayElem => dayElem.classList.remove('selected'));
    element.classList.add('selected');
}

function generateTimeGrid(date) {
    const timeGrid = document.getElementById('time-grid');
    const selectedTimes = JSON.parse(sessionStorage.getItem('selectedTimes')) || {};
    const unavailable = selectedTimes[date] || [];
    let htmlContent = timeSlots.map(time => {
        const isUnavailable = unavailable.includes(time);
        return `<div class="time-slot ${isUnavailable ? 'unavailable' : ''}" onclick="selectTimeSlot(this, '${date}', '${time}')">${time}</div>`;
    }).join('');
    timeGrid.innerHTML = htmlContent;
}

function selectTimeSlot(element, date, time) {
    const selectedTimes = JSON.parse(sessionStorage.getItem('selectedTimes')) || {};
    if (!selectedTimes[date]) {
        selectedTimes[date] = [];
    }
    selectedTimes[date].push(time);
    sessionStorage.setItem('selectedTimes', JSON.stringify(selectedTimes));
    element.classList.add('selected');
    element.classList.add('unavailable');
    element.onclick = null;

    document.getElementById('infoForm').style.display = 'grid';
}

function confirmInformation() {
    const firstName = document.getElementById('firstName').value;
    const lastName = document.getElementById('lastName').value;
    const phone = document.getElementById('phone').value;
    const email = document.getElementById('email').value;

    if (firstName && lastName && phone && email) {
        sessionStorage.setItem('firstName', firstName);
        sessionStorage.setItem('lastName', lastName);
        sessionStorage.setItem('phone', phone);
        sessionStorage.setItem('email', email);

        document.getElementById('calendar-container').style.display = 'none';
        document.getElementById('time-container').style.display = 'none';
        document.getElementById('info-container').style.display = 'none';

        const selectedDate = sessionStorage.getItem('selectedDate');
        const selectedTimes = JSON.parse(sessionStorage.getItem('selectedTimes'));
        const selectedTime = selectedTimes[selectedDate][selectedTimes[selectedDate].length - 1];
        
        const confirmationDetails = document.getElementById('confirmationDetails');
        confirmationDetails.innerHTML = `
            <p>Selected Date: ${selectedDate}</p>
            <p>Selected Time: ${selectedTime}</p>
            <p>First Name: ${firstName}</p>
            <p>Last Name: ${lastName}</p>
            <p>Phone: ${phone}</p>
            <p>Email: ${email}</p>
        `;

        document.getElementById('confirmation-container').style.display = 'flex';
    } else {
        alert('Please fill in all the fields correctly.');
    }
}


// Function to display data from session storage
function displayDataFromSessionStorage() {
    const dataMapping = {
        selectedStyle: 'Selected Style: ',
        quantity: 'Quantity: ',
        price: 'Price: ',
        selectedAddOns: 'Selected Add-ons: ',
        totalPrice: 'Total Price: ',
        firstName: 'First Name: ',
        lastName: 'Last Name: ',
        phoneNumber: 'Phone Number: ',
        email: 'Email: '
    };

    for (const [key, label] of Object.entries(dataMapping)) {
        const value = sessionStorage.getItem(key);
        if (value) {
            document.getElementById(key).textContent = label + value;
        }
    }
}

// Call the function to display data when the page loads
window.onload = displayDataFromSessionStorage;

function submitConfirmationForm() {
    const form = document.getElementById('confirmationForm');

    // Clear any previously added hidden fields
    const existingHiddenInputs = form.querySelectorAll('input[type="hidden"]');
    existingHiddenInputs.forEach(input => input.remove());

    // Add session storage items to the form as hidden fields
    const dataKeys = [
        'selectedStyle', 'quantity', 'price', 
        'selectedAddOns', 'totalPrice', 
        'firstName', 'lastName', 'phoneNumber', 'email'
    ];

    dataKeys.forEach(key => {
        const value = sessionStorage.getItem(key);
        if (value) {
            const hiddenInput = document.createElement('input');
            hiddenInput.type = 'hidden';
            hiddenInput.name = key;
            hiddenInput.value = value;
            form.appendChild(hiddenInput);
        }
    });

    const formData = new FormData(form);

    fetch(form.action, {
        method: form.method,
        body: formData,
        headers: {
            'Accept': 'application/json'
        }
    })
    .then(response => {
        if (response.ok) {
            alert('Form submitted successfully!');
        } else {
            response.json().then(data => {
                if (data.errors) {
                    alert('Form submission failed: ' + data.errors.map(error => error.message).join(', '));
                } else {
                    alert('Form submission failed.');
                }
            });
        }
    })
    .catch(error => {
        console.error('Error submitting the form:', error);
        alert('Form submission failed.');
    });
}




function goBackToBookingForm() {
    document.getElementById('calendar-container').style.display = 'flex';
    document.getElementById('time-container').style.display = 'flex';
    document.getElementById('info-container').style.display = 'flex';
    document.getElementById('confirmation-container').style.display = 'none';
}

function home() {
    window.location.href = 'index.html';
}

function openLoginSignupModal() {
    // Implement the logic to open the login/signup modal
}

document.addEventListener('DOMContentLoaded', () => {
    generateCalendar(currentMonth, currentYear);
});
</script>
</body>
</html>
        
